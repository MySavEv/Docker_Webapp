import{_ as k,b as x,d as I,r as g,e as N,f as T,g as e,h as V,i as f,v,j,w as E,o as B,a as C,p as L,k as O}from"./index-4dHJFcAk.js";import{s as l,a as w,b as S}from"./sweetalert-LjNN19ZY.js";const n=i=>(L("data-v-ec97ebfc"),i=i(),O(),i),P={class:"login-page"},D=n(()=>e("div",{class:"item1"},null,-1)),H={class:"item2"},M=n(()=>e("p",{id:"topic-line-1"},"Sign In",-1)),R=n(()=>e("p",{id:"topic-line-2"},"To Your Account",-1)),U=n(()=>e("label",{id:"input-1-text"},"Email/Phone",-1)),$=n(()=>e("label",{id:"input-2-text"},"Password",-1)),q=n(()=>e("button",{type:"submit",class:"button-18",role:"button"},"SignIn",-1)),A={__name:"Signin",setup(i){const c=x();I();const _="http://localhost:8080",r=g(""),u=g(""),b=async p=>{p.preventDefault(),console.log(p.target);const t=new Headers;t.append("Content-Type","application/json");const d=JSON.stringify({username:r.value,password:u.value}),a={method:"POST",headers:t,body:d,redirect:"follow"};try{const m=await fetch(`${_}/api/login/member`,a);if(m.status==400){const s=await fetch(`${_}/api/login/employee`,a);if(s.status==400)l();else{const o=await s.json();if(o.status=="Success"){const h=o.data.token;localStorage.setItem("token",h),w("Login Success!!").then(y=>{S(1e3).then(F=>{console.log(o),o.data.managerflag?c.push({name:"manager"}):c.push({name:o.data.type})})})}else l()}}else{const s=await m.json();if(s.status=="Success"){const o=s.data.token;localStorage.setItem("token",o),w("Login Success!!").then(h=>{S(1e3).then(y=>{console.log(s),c.push({name:s.data.type})})})}else l()}}catch{l()}};return(p,t)=>{const d=N("router-link");return B(),T("div",P,[D,e("div",H,[M,R,e("form",{onSubmit:V(b,["prevent"]),class:"input-box"},[U,f(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>r.value=a),type:"text",id:"studentId",class:"input-1",placeholder:"NatEiEi"},null,512),[[v,r.value]]),$,f(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>u.value=a),type:"password",id:"password",class:"input-2",placeholder:"******"},null,512),[[v,u.value]]),q],32),j(d,{to:"signup",class:"button-18"},{default:E(()=>[C("Signup")]),_:1})])])}}},z=k(A,[["__scopeId","data-v-ec97ebfc"]]);export{z as default};
