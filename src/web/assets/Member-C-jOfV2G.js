import{l as P,_ as z,a as M,b as N,c as R,d as F}from"./ad4-BrqlX7-E.js";import{_ as C,o as i,f as _,g as e,j as D,p as x,k as B,r as v,q as G,x as T,F as y,y as q,z as l,A as w,b as H,d as O,a as k,B as Q,c as I}from"./index-4dHJFcAk.js";import{s as S,S as j,a as L}from"./sweetalert-LjNN19ZY.js";const V="/assets/KEI_To_Black-C0joiFM6.png",U=c=>(x("data-v-e6335aec"),c=c(),B(),c),K={class:"header"},W=U(()=>e("img",{class:"logo",src:V,alt:""},null,-1)),J={class:"item2"},X={style:{"margin-left":"1.5rem","margin-right":"1.5rem"}},Y={__name:"member_nav",setup(c){return(r,t)=>(i(),_("div",K,[W,e("nav",null,[e("ul",J,[e("li",{onClick:t[0]||(t[0]=a=>r.$emit("clickmenu","home"))},"Home"),e("li",{onClick:t[1]||(t[1]=a=>r.$emit("clickmenu","menu"))},"Menu"),e("li",{onClick:t[2]||(t[2]=a=>r.$emit("clickmenu","point"))},"Point&Coupon"),e("li",{onClick:t[3]||(t[3]=a=>r.$emit("clickmenu","myacc"))},"MyAccount")])]),e("p",X,[D(P)])]))}},Z=C(Y,[["__scopeId","data-v-e6335aec"]]),A=c=>(x("data-v-e07e2601"),c=c(),B(),c),ee={class:"header"},te=A(()=>e("li",null,"Menu",-1)),oe={class:"container"},se=A(()=>e("img",{class:"logo",src:"https://cdn.discordapp.com/attachments/1114226503970979852/1234980354792751145/cup.png?ex=66355795&is=66340615&hm=ecca1487bff3c2c7982c955469fc6d58c12fc9856501a31865038cd4d2425357&",alt:""},null,-1)),ne=["onClick"],ce={__name:"menu",setup(c){const r="http://localhost:8080",t=v("coffee"),a=v([]),h=v([]);G([t],()=>{console.log(t),h.value=a.value.filter((s,n)=>t=="all"?!0:s.category==t.value)});const d=async s=>{console.log(s.ingredeints);let n=[];await s.ingredeints.forEach(m=>{g(m.ingredientID,n)}),console.log(n)},g=(s,n)=>{const m={method:"GET",redirect:"follow"};fetch(r+"/api/ingredient/info/?ingredientID="+s,m).then(p=>p.json()).then(p=>{console.log(p),n.push(p.data)}).catch(p=>console.error(p))};return T(()=>{const s={method:"GET",redirect:"follow"};fetch(`${r}/api/menu`,s).then(n=>n.json()).then(n=>{console.log(n),n.status=="Success"&&(a.value=n.data,h.value=a.value.filter((m,p)=>t=="all"?!0:m.category==t.value))}).catch(n=>console.error(n))}),(s,n)=>(i(),_(y,null,[e("ul",ee,[te,e("li",{onClick:n[0]||(n[0]=m=>t.value="coffee")},"COFFEE"),e("li",{onClick:n[1]||(n[1]=m=>t.value="tea")},"TEA"),e("li",{onClick:n[2]||(n[2]=m=>t.value="milk")},"MILK")]),e("div",oe,[(i(!0),_(y,null,q(h.value,m=>(i(),_("div",{key:m.menuID,class:"product"},[se,e("div",null,[e("p",null,l(m.name),1),e("p",null,l(m.price)+"à¸¿",1),e("button",{onClick:p=>d(m),class:"button-3",style:{"font-size":"18px"},role:"button"},"Details",8,ne)])]))),128))])],64))}},ae=C(ce,[["__scopeId","data-v-e07e2601"]]),E=c=>(x("data-v-c005e689"),c=c(),B(),c),le={class:"header"},ie=E(()=>e("p",{class:"topic"},"Coupon",-1)),re={class:"topic"},ue={class:"coupon-list"},de={key:0,src:"https://cdn.discordapp.com/attachments/1114226503970979852/1235730088260010136/Coupon_3.png?ex=66356ed3&is=66341d53&hm=2d5e3b44fe6884ad490b1cd115fe9ffbeeb586273905077a59f88a7a7db4f06d&",alt:"Coupon 1",class:"coupon-img"},pe={key:1,src:"https://cdn.discordapp.com/attachments/1114226503970979852/1235730087811350538/Coupon_1.png?ex=66356ed3&is=66341d53&hm=d7387fe0d0fcccf516f47f214ac9eff2a18c234e599c01f633c0431aee14665e&",alt:"Coupon 1",class:"coupon-img"},me={class:"content"},_e={class:"coupon-title"},he={class:"coupon-description"},fe=["onClick"],ge={key:0,class:"cart"},ve={style:{display:"flex","justify-content":"end"}},$e={class:"pointss"},ke={class:"container"},ye=E(()=>e("ul",{class:"product-wrap first"},[e("li",{class:"product"},[e("p",null,"couponID"),e("p",null,"reqpoints"),e("p",null,"type"),e("p",null,"discount"),e("p",null,"description"),e("p",null,"Get")])],-1)),be={class:"product"},Ce=["onClick"],we={__name:"point",setup(c){const r="http://localhost:8080",t=v([]),a=v(0),h=v(!1),d=v([]);function g(p){j.fire({title:"Show the QR code to the employee",imageUrl:`https://api.qrserver.com/v1/create-qr-code/?data=${p}&amp;size=150x150`,imageWidth:200,imageHeight:200,imageAlt:"QR Code",showCancelButton:!0,cancelButtonText:"Close",showConfirmButton:!1})}const s=()=>{const p=localStorage.getItem("token"),f=new Headers;f.append("Authorization",`Bearer ${p}`);const o={method:"GET",headers:f,redirect:"follow"};fetch(`${r}/api/member/coupon`,o).then(u=>u.json()).then(u=>{console.log(u),t.value=u.data}).catch(u=>console.error(u)),fetch(`${r}/api/member/point`,{method:"POST",headers:f}).then(u=>u.json()).then(u=>{a.value=u.data.points}).catch(u=>console.error(u))},n=()=>{const f={method:"GET",headers:new Headers,redirect:"follow"};fetch(`${r}/api/coupon`,f).then(o=>o.json()).then(o=>{console.log(o),o.status=="Success"?d.value=o.data:S(o.message)}).catch(o=>console.error(o))};T(()=>{s(),n()});const m=p=>{const f=new Headers;f.append("Content-Type","application/json"),f.append("Authorization","Bearer "+localStorage.getItem("token"));const o=JSON.stringify({couponID:p}),u={method:"POST",headers:f,body:o,redirect:"follow"};fetch(r+"/api/member/exchange",u).then($=>$.json()).then($=>{$.status=="Success"?(L($.message),n(),s()):S($.message)}).catch($=>console.error($))};return(p,f)=>(i(),_(y,null,[e("div",le,[ie,e("p",re,l(a.value)+" Points",1),e("p",{onClick:f[0]||(f[0]=o=>h.value=!0),class:"topic"},"Redeem")]),e("ul",ue,[(i(!0),_(y,null,q(t.value,o=>(i(),_("li",{key:o.couponID,class:"coupon-item"},[o.type=="1"?(i(),_("img",de)):(i(),_("img",pe)),e("div",me,[e("h3",_e,l(o.discount)+"% Off",1),e("p",he,l(o.description)+". Valid until "+l(o.expire_date.split("T")[0]),1),e("button",{onClick:u=>g(o.couponID),class:"button-3",style:{"font-size":"18px","background-color":"#C1855A"},role:"button"},"Use",8,fe)])]))),128))]),h.value?(i(),_("div",ge,[e("div",ve,[e("button",{onClick:f[1]||(f[1]=o=>h.value=!1),class:"button-3 close"},"X")]),e("p",$e,l(a.value+" Points"),1),e("div",ke,[ye,(i(!0),_(y,null,q(d.value,(o,u)=>(i(),_("ul",{key:u,class:"product-wrap"},[e("li",be,[e("p",null,l(o.couponID),1),e("p",null,l(o.reqpoints),1),e("p",null,l(o.type),1),e("p",null,l(o.discount),1),e("p",null,l(o.description),1),e("button",{onClick:$=>m(o.couponID),class:"button-3",role:"button"},"Get",8,Ce)])]))),128))])])):w("",!0)],64))}},Ie=C(we,[["__scopeId","data-v-c005e689"]]),b=c=>(x("data-v-b79952a4"),c=c(),B(),c),Se={class:"topic"},xe={class:"info"},Be={class:"profile-left"},Te=b(()=>e("strong",null,"First Name",-1)),qe=b(()=>e("strong",null,"Gender",-1)),De=b(()=>e("strong",null,"Birth",-1)),He=b(()=>e("strong",null,"Phone",-1)),Oe={class:"profile-left"},je=b(()=>e("strong",null,"Last Name",-1)),Ae=b(()=>e("strong",null,"Address",-1)),Ee=b(()=>e("strong",null,"Email",-1)),Pe={__name:"account",setup(c){H(),O();const r="http://localhost:8080",t=v({memberID:0,gender:"",name:"",email:"",tel:"",join_date:"",birthday:"",points:0,street:"",subdistrict:"",district:"",city:"",zipcode:""});function a(){j.fire({title:"Show the QR code to the employee",imageUrl:`https://api.qrserver.com/v1/create-qr-code/?data=${t.memberID}&amp;size=150x150`,imageWidth:200,imageHeight:200,imageAlt:"QR Code",showCancelButton:!0,cancelButtonText:"Close",showConfirmButton:!1})}return T(()=>{const h=localStorage.getItem("token"),d=new Headers;d.append("Authorization",`Bearer ${h}`);const g={method:"POST",headers:d,redirect:"follow"};fetch(`${r}/api/member/profile`,g).then(s=>s.json()).then(s=>{s.status=="Success"&&(console.log(s),t.value=s.data[0])}).catch(s=>console.error(s))}),(h,d)=>(i(),_(y,null,[e("p",Se,[k("Acount "),e("strong",null," #"+l(t.value.memberID),1)]),e("div",xe,[e("div",Be,[e("p",null,[Te,k(" : "+l(t.value.name.split(" ")[0]),1)]),e("p",null,[qe,k(" : "+l(t.value.gender),1)]),e("p",null,[De,k(" : "+l(t.value.birthday.split("T")[0]),1)]),e("p",null,[He,k(" : "+l(t.value.tel),1)])]),e("div",Oe,[e("p",null,[je,k(" : "+l(t.value.name.split(" ")[1]),1)]),e("p",null,[Ae,k(" : "+l(t.value.birthday.split("T")[0]),1)]),e("p",null,[Ee,k(" : "+l(t.value.email),1)])])]),e("div",{class:"box-qr"},[e("button",{onClick:a,class:"button-43",role:"button"},"QRCode")])],64))}},ze=C(Pe,[["__scopeId","data-v-b79952a4"]]),Me=Q('<img src="'+z+'" alt="" data-v-45c03aa8><img src="'+M+'" alt="" data-v-45c03aa8><img src="'+N+'" alt="" data-v-45c03aa8><img src="'+R+'" alt="" data-v-45c03aa8><img src="'+F+'" alt="" data-v-45c03aa8>',5),Ne=[Me],Re={__name:"home",setup(c){return(r,t)=>(i(),_("div",null,Ne))}},Fe=C(Re,[["__scopeId","data-v-45c03aa8"]]),Ge={class:"container"},Qe={__name:"Member",setup(c){const r="http://localhost:8080",t=H();O();const a=v("home");return T(()=>{const h=localStorage.getItem("token");if(!h){S("Plese Login").then(s=>{localStorage.removeItem("token"),t.push({name:"signin"})});return}const d=new Headers;d.append("Authorization",`Bearer ${h}`);const g={method:"POST",headers:d,redirect:"follow"};fetch(`${r}/api/verify`,g).then(s=>s.json()).then(s=>{s.status=="Success"||S("Plese Login").then(n=>{localStorage.removeItem("token"),t.push({name:"signin"})})}).catch(s=>console.error(s))}),(h,d)=>(i(),_(y,null,[D(Z,{onClick:d[0]||(d[0]=()=>{console.log(a.value)}),onClickmenu:d[1]||(d[1]=g=>{a.value=g})}),e("div",Ge,[a.value=="home"?(i(),I(Fe,{key:0})):w("",!0),a.value=="menu"?(i(),I(ae,{key:1})):w("",!0),a.value=="point"?(i(),I(Ie,{key:2})):w("",!0),a.value=="myacc"?(i(),I(ze,{key:3})):w("",!0)])],64))}},Ke=C(Qe,[["__scopeId","data-v-b2856e51"]]);export{Ke as default};
